Description: Use FHS compliant path for data
 By default, mercurial installs expects its data files next to their
 py files in /usr/lib/python2.7/dist-packages/mercurial .  Debian puts
 the data files in the FHS compliant /usr/share/mercurial .  Fix the
 path only when run from the FHS compliant path
 (/usr/lib/pythonX.Y/dist-packages/mercurial) so as to not break the
 testsuite when building the package.
Author: Javi Merino <vicho@debian.org>

--- mercurial.orig/mercurial/utils/resourceutil.py
+++ mercurial/mercurial/utils/resourceutil.py
@@ -46,7 +46,10 @@ if mainfrozen() and getattr(sys, 'frozen
         return os.path.join(_rootpath, *dirs[1:])
 
 else:
-    datapath = os.path.dirname(os.path.dirname(pycompat.fsencode(__file__)))
+    if __file__.startswith("/usr/lib/python"):
+       datapath = "/usr/share/mercurial"
+    else:
+        datapath = os.path.dirname(os.path.dirname(pycompat.fsencode(__file__)))
     _rootpath = os.path.dirname(datapath)
 
     def _package_path(package):
