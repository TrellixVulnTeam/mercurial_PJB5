Use sensible-editor as default instead of vi.

--- a/hgeditor
+++ b/hgeditor
@@ -7,7 +7,7 @@
 # only for Mercurial, modify this:
 case "${EDITOR}" in
     "")
-        EDITOR="vi"
+        EDITOR="sensible-editor"
         ;;
     emacs)
         EDITOR="$EDITOR -nw"
--- a/mercurial/commands.py
+++ b/mercurial/commands.py
@@ -1970,8 +1970,8 @@ def debuginstall(ui):
     editor = ui.geteditor()
     cmdpath = util.findexe(editor) or util.findexe(editor.split()[0])
     if not cmdpath:
-        if editor == 'vi':
-            ui.write(_(" No commit editor set and can't find vi in PATH\n"))
+        if editor == 'sensible-editor':
+            ui.write(_(" No commit editor set and can't find sensible-editor in PATH\n"))
             ui.write(_(" (specify a commit editor in your configuration"
                        " file)\n"))
         else:
--- a/mercurial/ui.py
+++ b/mercurial/ui.py
@@ -693,7 +693,7 @@ class ui(object):
             # avoid confusion.
             editor = 'E'
         else:
-            editor = 'vi'
+            editor = 'sensible-editor'
         return (os.environ.get("HGEDITOR") or
                 self.config("ui", "editor") or
                 os.environ.get("VISUAL") or
--- a/i18n/da.po
+++ b/i18n/da.po
@@ -8752,7 +8752,7 @@ msgstr ""
 msgid "Checking commit editor...\n"
 msgstr ""
 
-msgid " No commit editor set and can't find vi in PATH\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
 msgstr ""
 
 msgid " (specify a commit editor in your configuration file)\n"
@@ -13521,7 +13521,8 @@ msgstr ""
 
 msgid ""
 "``editor``\n"
-"    The editor to use during a commit. Default is ``$EDITOR`` or ``vi``."
+"    The editor to use during a commit. Default is ``$EDITOR`` or\n"
+"    ``sensible-editor``."
 msgstr ""
 
 msgid ""
@@ -14194,7 +14195,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 
 msgid ""
--- a/i18n/de.po
+++ b/i18n/de.po
@@ -10140,8 +10140,8 @@ msgstr "(Vorlagen scheinen falsch instal
 msgid "Checking commit editor...\n"
 msgstr "Prüfe Editor für Versionsmeldungen...\n"
 
-msgid " No commit editor set and can't find vi in PATH\n"
-msgstr " Kein Editor für Versionsmeldungen angegeben und vi nicht im PATH\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
+msgstr " Kein Editor für Versionsmeldungen angegeben und sensible-editor nicht im PATH\n"
 
 msgid " (specify a commit editor in your configuration file)\n"
 msgstr " (Gib einen Editor in der .hgrc Datei an!)\n"
@@ -15292,7 +15292,8 @@ msgstr ""
 
 msgid ""
 "``editor``\n"
-"    The editor to use during a commit. Default is ``$EDITOR`` or ``vi``."
+"    The editor to use during a commit. Default is ``$EDITOR`` or\n"
+"    ``sensible-editor``."
 msgstr ""
 
 msgid ""
@@ -16050,7 +16051,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 "EDITOR\n"
 "    Manchmal muss Mercurial eine Textdatei in einem Editor öffnen, damit\n"
@@ -16059,7 +16060,7 @@ msgstr ""
 "    variablen HGEDITOR, VISUAL und EDITOR (in dieser Reihenfolge) "
 "ermittelt.\n"
 "    Der erste nicht-leere wird verwendet. Wenn alle Angaben leer sind, wird\n"
-"    der Standard 'vi' verwendet."
+"    der Standard 'sensible-editor' verwendet."
 
 msgid ""
 "PYTHONPATH\n"
--- a/i18n/el.po
+++ b/i18n/el.po
@@ -274,7 +274,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 
 msgid ""
@@ -11500,7 +11500,7 @@ msgstr ""
 msgid "Checking commit editor...\n"
 msgstr ""
 
-msgid " No commit editor set and can't find vi in PATH\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
 msgstr ""
 
 msgid " (specify a commit editor in your .hgrc file)\n"
--- a/i18n/fr.po
+++ b/i18n/fr.po
@@ -299,7 +299,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 
 msgid ""
@@ -8228,7 +8228,7 @@ msgstr ""
 msgid "Checking commit editor...\n"
 msgstr ""
 
-msgid " No commit editor set and can't find vi in PATH\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
 msgstr ""
 
 msgid " (specify a commit editor in your .hgrc file)\n"
--- a/i18n/it.po
+++ b/i18n/it.po
@@ -7157,8 +7157,8 @@ msgstr ""
 msgid "Checking commit editor...\n"
 msgstr "Sto controllando l'editor per il commit...\n"
 
-msgid " No commit editor set and can't find vi in PATH\n"
-msgstr "Nessun editor per il commit trovato e non trovo vi in PATH\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
+msgstr "Nessun editor per il commit trovato e non trovo sensible-editor in PATH\n"
 
 msgid " (specify a commit editor in your configuration file)\n"
 msgstr ""
@@ -10462,7 +10462,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 
 msgid ""
--- a/i18n/ja.po
+++ b/i18n/ja.po
@@ -10595,8 +10595,8 @@ msgstr " (テンプレートのインス
 msgid "Checking commit editor...\n"
 msgstr "メッセージ入力用エディタの検証中...\n"
 
-msgid " No commit editor set and can't find vi in PATH\n"
-msgstr " エディタが起動できません(vi にも PATH が通っていません)\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
+msgstr " エディタが起動できません(sensible-editor にも PATH が通っていません)\n"
 
 msgid " (specify a commit editor in your configuration file)\n"
 msgstr " (コミットメッセージ用エディタを設定ファイルで設定してください)\n"
@@ -16815,11 +16815,12 @@ msgstr ""
 
 msgid ""
 "``editor``\n"
-"    The editor to use during a commit. Default is ``$EDITOR`` or ``vi``."
+"    The editor to use during a commit. Default is ``$EDITOR`` or\n"
+"    ``sensible-editor``."
 msgstr ""
 "``editor``\n"
 "    コミットログ入力用エディタ。 無指定の場合、 ``$EDITOR`` ないし\n"
-"    ``vi`` が使用されます。"
+"    ``sensible-editor`` が使用されます。"
 
 msgid ""
 "``fallbackencoding``\n"
@@ -17841,7 +17842,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 "EDITOR\n"
 "    コミット時のメッセージのように、 エディタでファイルを開き、\n"
@@ -17849,7 +17850,7 @@ msgstr ""
 "    そこで使用されるエディタは、 HGEDITOR、 VISUAL\n"
 "    あるいは EDITOR 環境変数に設定されたものを(この順序で)使用します。\n"
 "    最初の空で無い値に設定された環境変数の値を使用します。\n"
-"    いずれも未設定 (あるいは空) の場合は、 'vi' が使用されます。"
+"    いずれも未設定 (あるいは空) の場合は、 'sensible-editor' が使用されます。"
 
 msgid ""
 "PYTHONPATH\n"
--- a/i18n/pt_BR.po
+++ b/i18n/pt_BR.po
@@ -10745,10 +10745,10 @@ msgstr " (modelos parecem ter sido insta
 msgid "Checking commit editor...\n"
 msgstr "Verificando editor para consolidação...\n"
 
-msgid " No commit editor set and can't find vi in PATH\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
 msgstr ""
 " Nenhum editor para consolidação configurado, e não foi possível encontrar "
-"'vi' no PATH\n"
+"'sensible-editor' no PATH\n"
 
 msgid " (specify a commit editor in your configuration file)\n"
 msgstr ""
@@ -17119,10 +17119,12 @@ msgstr ""
 
 msgid ""
 "``editor``\n"
-"    The editor to use during a commit. Default is ``$EDITOR`` or ``vi``."
+"    The editor to use during a commit. Default is ``$EDITOR`` or\n"
+"    ``sensible-editor``."
 msgstr ""
 "``editor``\n"
-"    O editor usado durante um commit. O padrão é ``$EDITOR`` ou ``vi``."
+"    O editor usado durante um commit. O padrão é ``$EDITOR`` ou\n"
+"    ``sensible-editor``."
 
 msgid ""
 "``fallbackencoding``\n"
@@ -18174,7 +18176,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 "EDITOR\n"
 "    Algumas vezes o Mercurial precisa abrir em um editor um arquivo\n"
@@ -18182,7 +18184,7 @@ msgstr ""
 "    mensagens de consolidação. O editor usado é determinado pela\n"
 "    consulta às variáveis de ambiente HGEDITOR, VISUAL e EDITOR,\n"
 "    nessa ordem. O primeiro valor não vazio é escolhido. Se todos\n"
-"    estiverem vazios, o editor será o 'vi'."
+"    estiverem vazios, o editor será o 'sensible-editor'."
 
 msgid ""
 "PYTHONPATH\n"
--- a/i18n/sv.po
+++ b/i18n/sv.po
@@ -8717,8 +8717,8 @@ msgstr " (mallar verkar vara inkorrekt i
 msgid "Checking commit editor...\n"
 msgstr "Kontrollerar arkiveringseditor...\n"
 
-msgid " No commit editor set and can't find vi in PATH\n"
-msgstr " Ingen arkiveringseditor satt och kan inte hitta vi i PATH\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
+msgstr " Ingen arkiveringseditor satt och kan inte hitta sensible-editor i PATH\n"
 
 msgid " (specify a commit editor in your configuration file)\n"
 msgstr " (specificera en arkiveringseditor i din konfigurationsfil)\n"
@@ -13794,7 +13794,8 @@ msgstr ""
 
 msgid ""
 "``editor``\n"
-"    The editor to use during a commit. Default is ``$EDITOR`` or ``vi``."
+"    The editor to use during a commit. Default is ``$EDITOR`` or\n"
+"    ``sensible-editor``."
 msgstr ""
 
 msgid ""
@@ -14477,7 +14478,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 
 msgid ""
--- a/i18n/zh_CN.po
+++ b/i18n/zh_CN.po
@@ -5880,7 +5880,7 @@ msgstr ""
 msgid "Checking commit editor...\n"
 msgstr ""
 
-msgid " No commit editor set and can't find vi in PATH\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
 msgstr ""
 
 msgid " (specify a commit editor in your .hgrc file)\n"
@@ -8768,7 +8768,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 
 msgid ""
--- a/i18n/zh_TW.po
+++ b/i18n/zh_TW.po
@@ -6760,8 +6760,8 @@ msgstr ""
 msgid "Checking commit editor...\n"
 msgstr "檢查提交訊息編輯器...\n"
 
-msgid " No commit editor set and can't find vi in PATH\n"
-msgstr "沒有設定提交訊息編輯器,然後在PATH中也沒有vi\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
+msgstr "沒有設定提交訊息編輯器,然後在PATH中也沒有sensible-editor\n"
 
 msgid " (specify a commit editor in your configuration file)\n"
 msgstr "(在你的設定檔指明一個用來編輯提交訊息的編輯器)\n"
@@ -9710,7 +9710,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 
 msgid ""
--- a/mercurial/help/environment.txt
+++ b/mercurial/help/environment.txt
@@ -94,7 +94,7 @@ EDITOR
     editor it uses is determined by looking at the environment
     variables HGEDITOR, VISUAL and EDITOR, in that order. The first
     non-empty one is chosen. If all of them are empty, the editor
-    defaults to 'vi'.
+    defaults to 'sensible-editor'.
 
 PYTHONPATH
     This is used by Python to find imported modules and may need to be
--- a/mercurial/help/config.txt
+++ b/mercurial/help/config.txt
@@ -1121,7 +1121,8 @@ User interface controls.
     Print debugging information. True or False. Default is False.
 
 ``editor``
-    The editor to use during a commit. Default is ``$EDITOR`` or ``vi``.
+    The editor to use during a commit. Default is ``$EDITOR`` or
+    ``sensible-editor``.
 
 ``fallbackencoding``
     Encoding to try if it's not possible to decode the changelog using
--- a/i18n/ro.po
+++ b/i18n/ro.po
@@ -7722,7 +7722,7 @@ msgstr ""
 msgid "Checking commit editor...\n"
 msgstr "Se verifică editorul pentru commit...\n"
 
-msgid " No commit editor set and can't find vi in PATH\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
 msgstr ""
 
 msgid " (specify a commit editor in your configuration file)\n"
@@ -11925,7 +11925,8 @@ msgstr ""
 
 msgid ""
 "``editor``\n"
-"    The editor to use during a commit. Default is ``$EDITOR`` or ``vi``."
+"    The editor to use during a commit. Default is ``$EDITOR`` or\n"
+"    ``sensible-editor``."
 msgstr ""
 
 msgid ""
@@ -12570,7 +12571,7 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 
 msgid ""
--- a/i18n/ru.po
+++ b/i18n/ru.po
@@ -10969,8 +10969,8 @@ msgstr " (шаблоны, похоже,
 msgid "Checking commit editor...\n"
 msgstr "Проверка редактора сообщений фиксации...\n"
 
-msgid " No commit editor set and can't find vi in PATH\n"
-msgstr " Редактор сообщений не установлен и vi не доступен в PATH\n"
+msgid " No commit editor set and can't find sensible-editor in PATH\n"
+msgstr " Редактор сообщений не установлен и sensible-editor не доступен в PATH\n"
 
 msgid " (specify a commit editor in your configuration file)\n"
 msgstr " (задайте редактор сообщений в вашем конфиге)\n"
@@ -17256,10 +17256,12 @@ msgstr ""
 
 msgid ""
 "``editor``\n"
-"    The editor to use during a commit. Default is ``$EDITOR`` or ``vi``."
+"    The editor to use during a commit. Default is ``$EDITOR`` or\n"
+"    ``sensible-editor``."
 msgstr ""
 "``editor``\n"
-"    Редактор, вызываемый при фиксации. По умолчанию ``$EDITOR`` or ``vi``."
+"    Редактор, вызываемый при фиксации. По умолчанию ``$EDITOR`` or\n"
+"    ``sensible-editor``."
 
 msgid ""
 "``fallbackencoding``\n"
@@ -18290,14 +18292,14 @@ msgid ""
 "    editor it uses is determined by looking at the environment\n"
 "    variables HGEDITOR, VISUAL and EDITOR, in that order. The first\n"
 "    non-empty one is chosen. If all of them are empty, the editor\n"
-"    defaults to 'vi'."
+"    defaults to 'sensible-editor'."
 msgstr ""
 "EDITOR\n"
 "    Иногда требуется открыть текстовый файл в редакторе, чтобы.\n"
 "    внести изменения, например для написания сообщения фиксации.\n"
 "    Используемый редактор определяется переменными среды HGEDITOR,\n"
 "    VISUAL и EDITOR, именно в таком порядке. Выбирается первая\n"
-"    непустая переменная. Если они все пусты, используется 'vi'."
+"    непустая переменная. Если они все пусты, используется 'sensible-editor'."
 
 msgid ""
 "PYTHONPATH\n"
